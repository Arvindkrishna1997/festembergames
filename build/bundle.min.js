!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("./states/boot"),o=r(i),a=e("./states/gameover"),s=r(a),l=e("./states/preloader"),u=r(l),c=e("./states/level1/level1"),h=r(c),f=e("./states/cold/coldcountry"),y=r(f),d=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"panda-game");d.state.add("boot",new o.default),d.state.add("gameover",new s.default),d.state.add("preloader",new u.default),d.state.add("level1",new h.default),d.state.add("coldcountry",new y.default),d.state.start("boot")},{"./states/boot":8,"./states/cold/coldcountry":9,"./states/gameover":13,"./states/level1/level1":16,"./states/preloader":18}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../utils/raycaster"),u=r(l),c=function(e){function t(e,n,r,a,s){i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,"crosshairs",s));return l.game.physics.arcade.enableBody(l),l.body.velocity.set(a.x,a.y),l.initVelocity=a,l.raycaster=new u.default,l.losToPlayer=null,l.maxTimeToFire=600,l.timeToFire=1/0,l.maxTimeToSee=400,l.timeToSee=1/0,l.isShooting=!1,l.weapon=e.add.weapon(2,"bullet"),l.weapon.bulletKillType=Phaser.Weapon.KILL_CAMERA_BOUNDS,l.weapon.bulletSpeed=3e3,l.weapon.bulletGravity.set(0),l.weapon.trackSprite(l,l.width,l.height/2),l}return a(t,e),s(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){if(this.isShooting===!0){if(!(this.timeToSee<=0))return void(this.timeToSee-=this.game.time.physicsElapsedMS);this.timeToSee=1/0,this.timeToFire=this.maxTimeToFire-this.maxTimeToSee,this.isShooting=!1}this.sightCheck(),this.timeToFire<=0&&this.fireBullet()}},{key:"sightCheck",value:function(){if(this.inCamera){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.obstacles[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.inCamera&&e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}var s=new Phaser.Point(this.body.position.x+this.width/2,this.body.position.y+this.height/2),l=this.player.getCenter();this.raycaster.castRay(s,l,e)?(this.losToPlayer=null,this.timeToFire=1/0):(null!==this.losToPlayer&&this.timeToFire!==1/0?this.timeToFire-=this.game.time.physicsElapsedMS:this.timeToFire=this.maxTimeToFire,this.losToPlayer=new Phaser.Line(s.x,s.y,l.x,l.y))}}},{key:"fireBullet",value:function(){var e=this.player.getCenter();this.weapon.fireAtXY(e.x,e.y),this.weapon.bullets.children[this.weapon.bullets.children.length-1].body.allowGravity=!1,this.isShooting=!0,this.timeToSee=this.maxTimeToSee}},{key:"cacheObstacles",value:function(e){this.obstacles=e}},{key:"cachePlayer",value:function(e){this.player=e}},{key:"reverseDirection",value:function(e){e.body.position.x>this.body.position.x?this.body.velocity.set(-this.initVelocity.x,this.initVelocity.y):this.body.velocity.set(this.initVelocity.x,this.initVelocity.y)}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}},{key:"eliminate",value:function(){this.losToPlayer=null,this.timeToFire=1/0,this.timeToSee=1/0,this.isShooting=!1,this.destroy()}}]),t}(Phaser.Sprite);n.default=c},{"../utils/raycaster":19}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e,n,o,a,s,l){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,null,l));return u.renderable=!1,u.width=a,u.height=s,u.game.physics.arcade.enableBody(u),u.body.allowGravity=!1,u.body.immovable=!0,u}return o(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=s},{}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e,n,o,a,s,l){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a,s,l));return u.name=l,u.game.physics.arcade.enableBody(u),u.body.allowGravity=!1,u.body.immovable=!1,u.edges=[new Phaser.Line(n,o,n+a,o),new Phaser.Line(n,o,n,o+s),new Phaser.Line(n+a,o,n+a,o+s),new Phaser.Line(n,o+s,n+a,o+s)],u}return o(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.TileSprite);n.default=s},{}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e,n,o,a,s,l){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a,s,l));return u.name=l,u.game.physics.arcade.enableBody(u),u.body.allowGravity=!1,u.body.immovable=!0,u.edges=[new Phaser.Line(n,o,n+a,o),new Phaser.Line(n,o,n,o+s),new Phaser.Line(n+a,o,n+a,o+s),new Phaser.Line(n,o+s,n+a,o+s)],u}return o(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"getEdges",value:function(){return this.edges}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.TileSprite);n.default=s},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e,n,o,a){r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,"crosshairs",a));return s.accelerationMagnitude=1400,s.jumping=!1,s.keyPressCount=0,s.isFacingRight=!0,s.game.physics.arcade.enableBody(s),s.body.maxVelocity=new Phaser.Point(400,1e3),s.friction=1400,s.body.collideWorldBounds=!0,s.anchor.setTo(.5,0),s.game.global.controls.up.onDown.add(function(){s.increaseKeyPressCount(),s.jumping===!1&&(s.jumping=!0,s.body.velocity.y=-s.body.maxVelocity.y)},s),s.game.global.controls.attack.onDown.add(function(){s.increaseKeyPressCount(),s.sword.revive()},s),s.game.global.controls.down.onDown.add(s.increaseKeyPressCount,s),s.game.global.controls.left.onDown.add(s.increaseKeyPressCount,s),s.game.global.controls.right.onDown.add(s.increaseKeyPressCount,s),s.game.global.controls.attack.onUp.add(function(){s.decreaseKeyPressCount(),s.sword.kill()},s),s.game.global.controls.up.onUp.add(s.decreaseKeyPressCount,s),s.game.global.controls.down.onUp.add(s.decreaseKeyPressCount,s),s.game.global.controls.left.onUp.add(s.decreaseKeyPressCount,s),s.game.global.controls.right.onUp.add(s.decreaseKeyPressCount,s),s}return o(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){this.game.camera.follow(this);var e=this.game.global.controls;e.down.isDown&&(this.body.velocity.y+=this.accelerationMagnitude*this.game.time.physicsElapsed),e.left.isDown&&(e.right.isUp||e.left.timeDown>e.right.timeDown)?(this.body.velocity.x-=this.accelerationMagnitude*this.game.time.physicsElapsed,this.isFacingRight=!1):e.right.isDown?(this.body.velocity.x+=this.accelerationMagnitude*this.game.time.physicsElapsed,this.isFacingRight=!0):e.left.isUp&&this.body.velocity.x<0?this.body.velocity.x=Math.min(0,this.body.velocity.x+this.friction*this.game.time.physicsElapsed):e.right.isUp&&this.body.velocity.x>0&&(this.body.velocity.x=Math.max(0,this.body.velocity.x-this.friction*this.game.time.physicsElapsed)),0===this.keyPressCount?(this.game.time.slowMotion=this.game.global.slowdown,this.game.global.isSlowdown=!0):(this.game.time.slowMotion=1,this.game.global.isSlowdown=!1),this.isFacingRight===!1?this.scale.x=-1:this.scale.x=1}},{key:"getCenter",value:function(){var e=this.body.position.clone();return e.x+=Math.abs(this.width/2),e.y+=this.height/2,e}},{key:"grounded",value:function(e,t){t.body.position.y>=e.body.bottom&&(this.jumping=!1)}},{key:"increaseKeyPressCount",value:function(){this.keyPressCount++}},{key:"decreaseKeyPressCount",value:function(){this.keyPressCount--}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=s},{}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e,n,o,a){r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,"bullet",a));return s.game.physics.arcade.enableBody(s),s.body.allowGravity=!1,s.body.immovable=!0,s}return o(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=s},{}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={score:0,slowdown:13,isSlowdown:!0},this.game.global.controls=Object.assign(this.game.input.keyboard.createCursorKeys(),{attack:this.game.input.keyboard.addKey(Phaser.Keyboard.X)})}}]),t}(Phaser.State);n.default=s},{}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../../prefabs/player"),u=r(l),c=e("../../prefabs/obstacle"),h=r(c),f=e("../../prefabs/enemyNav"),y=r(f),d=e("../../prefabs/enemyBasic"),p=r(d),b=e("../../prefabs/sword"),v=r(b),m=e("./obstacles"),g=r(m),w=e("./enemyNavs"),_=r(w),O=e("./enemies"),P=r(O),x=e("../../prefabs/movableobstacle"),k=r(x),j=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return a(t,e),s(t,[{key:"preload",value:function(){}},{key:"create",value:function(){this.game.world.setBounds(0,0,1920,1080),this.world.width=1920,this.world.height=1080,this.game.physics.arcade.gravity.y=1400,this.bitmap=this.game.add.bitmapData(this.world.width,this.world.height),this.game.add.image(0,0,this.bitmap),this.player=new u.default(this.game,100,900),this.game.add.existing(this.player),this.game.camera.follow(this.player,Phaser.Camera.FOLLOW_TOPDOWN);var e=new v.default(this.game,Math.abs(this.player.width/2),this.player.height/2);e.y-=e.height/2,e.kill(),this.player.sword=e,this.player.addChild(e),this.obstacles=[];var t=!0,n=!1,r=void 0;try{for(var i,o=g.default[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=new h.default(this.game,a.x,a.y,a.width,a.height,"crosshairs");this.game.add.existing(s),this.obstacles.push(s)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.movableobstacles=[];var l=!0,c=!1,f=void 0;try{for(var d,b=g.default[Symbol.iterator]();!(l=(d=b.next()).done);l=!0){var m=d.value,w=new k.default(this.game,m.x,m.y,m.width,m.height,"crosshairs");this.game.add.existing(w),this.movableobstacles.push(w)}}catch(e){c=!0,f=e}finally{try{!l&&b.return&&b.return()}finally{if(c)throw f}}this.enemyNavs=[];var O=!0,x=!1,j=void 0;try{for(var T,S=_.default[Symbol.iterator]();!(O=(T=S.next()).done);O=!0){var C=T.value,E=new y.default(this.game,C.x,C.y,C.width,C.height);this.game.add.existing(E),this.enemyNavs.push(E)}}catch(e){x=!0,j=e}finally{try{!O&&S.return&&S.return()}finally{if(x)throw j}}this.enemies=[];var M=!0,L=!1,D=void 0;try{for(var N,R=P.default[Symbol.iterator]();!(M=(N=R.next()).done);M=!0){var B=N.value,F=new p.default(this.game,B.x,B.y,B.vel);F.cacheObstacles(this.obstacles),F.cachePlayer(this.player),this.game.add.existing(F),this.enemies.push(F)}}catch(e){L=!0,D=e}finally{try{!M&&R.return&&R.return()}finally{if(L)throw D}}}},{key:"update",value:function(){this.game.physics.arcade.collide(this.player,this.obstacles,this.player.grounded,null,this.player),this.game.physics.arcade.collide(this.enemies,this.obstacles)}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.State);n.default=j},{"../../prefabs/enemyBasic":2,"../../prefabs/enemyNav":3,"../../prefabs/movableobstacle":4,"../../prefabs/obstacle":5,"../../prefabs/player":6,"../../prefabs/sword":7,"./enemies":10,"./enemyNavs":11,"./obstacles":12}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=[{x:800,y:900,vel:{x:-100,y:0}},{x:1600,y:900,vel:{x:-100,y:0}}];n.default=r},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=[{x:650,y:640,width:10,height:10},{x:940,y:640,width:10,height:10},{x:1500,y:970,width:10,height:10},{x:1910,y:970,width:10,height:10}];n.default=r},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=[{x:0,y:980,width:1920,height:100}];n.default=r},{}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"create",value:function(){this.gameoverText=this.add.text(this.game.camera.width/2,this.game.camera.height/2,"You died :(\nClick to restart",{font:"42px Arial",fill:"#ffffff",align:"center"}),this.gameoverText.anchor.set(.5),this.input.onDown.add(this.onInputDown,this),this.canContinueToNextState=!1,this.game.time.events.add(.5*Phaser.Timer.SECOND,function(){this.canContinueToNextState=!0},this)}},{key:"update",value:function(){}},{key:"onInputDown",value:function(){this.canContinueToNextState&&this.game.state.start("level1")}}]),t}(Phaser.State);n.default=s},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=[{x:800,y:610,vel:{x:100,y:0}},{x:1600,y:880,vel:{x:100,y:0}}];n.default=r},{}],15:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../../prefabs/player"),u=r(l),c=e("../../prefabs/obstacle"),h=r(c),f=e("../../prefabs/enemyNav"),y=r(f),d=e("../../prefabs/enemyBasic"),p=r(d),b=e("../../prefabs/sword"),v=r(b),m=e("./obstacles"),g=r(m),w=e("./enemyNavs"),_=r(w),O=e("./enemies"),P=r(O),x=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return a(t,e),s(t,[{key:"preload",value:function(){}},{key:"create",value:function(){this.game.world.setBounds(0,0,1920,1080),this.world.width=1920,this.world.height=1080,this.game.physics.arcade.gravity.y=1400,this.bitmap=this.game.add.bitmapData(this.world.width,this.world.height),this.game.add.image(0,0,this.bitmap),this.player=new u.default(this.game,this.game.world.centerX,this.game.world.centerY),this.game.add.existing(this.player),this.game.camera.follow(this.player,Phaser.Camera.FOLLOW_TOPDOWN);var e=new v.default(this.game,Math.abs(this.player.width/2),this.player.height/2);e.y-=e.height/2,e.kill(),this.player.sword=e,this.player.addChild(e),this.obstacles=[];var t=!0,n=!1,r=void 0;try{for(var i,o=g.default[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=new h.default(this.game,a.x,a.y,a.width,a.height,"crosshairs");this.game.add.existing(s),this.obstacles.push(s)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.enemyNavs=[];var l=!0,c=!1,f=void 0;try{for(var d,b=_.default[Symbol.iterator]();!(l=(d=b.next()).done);l=!0){var m=d.value,w=new y.default(this.game,m.x,m.y,m.width,m.height);this.game.add.existing(w),this.enemyNavs.push(w)}}catch(e){c=!0,f=e}finally{try{!l&&b.return&&b.return()}finally{if(c)throw f}}this.enemies=[];var O=!0,x=!1,k=void 0;try{for(var j,T=P.default[Symbol.iterator]();!(O=(j=T.next()).done);O=!0){var S=j.value,C=new p.default(this.game,S.x,S.y,S.vel);C.cacheObstacles(this.obstacles),C.cachePlayer(this.player),this.game.add.existing(C),this.enemies.push(C)}}catch(e){x=!0,k=e}finally{try{!O&&T.return&&T.return()}finally{if(x)throw k}}this.bullets=[]}},{key:"update",value:function(){this.handleBulletCollisions(),this.game.physics.arcade.collide(this.player,this.obstacles,this.player.grounded,null,this.player),this.game.physics.arcade.collide(this.enemies,this.obstacles),this.game.physics.arcade.collide(this.enemies,this.enemyNavs,function(e,t){e.reverseDirection(t)});var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.enemies[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.game.physics.arcade.overlap(this.player.sword,a,function(e,t){t.eliminate()})===!1&&e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}var s=[],l=!0,u=!1,c=void 0;try{for(var h,f=this.enemies[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var y=h.value;null!==y.losToPlayer&&y.isShooting===!1&&s.push(y.losToPlayer)}}catch(e){u=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}this.drawLines(s),this.enemies=e}},{key:"handleBulletCollisions",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var i,o=this.enemies[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.game.physics.arcade.collide(a.weapon.bullets,this.player,function(t,n){n.kill(),e.game.state.start("gameover")},null,this),this.game.physics.arcade.collide(a.weapon.bullets,this.obstacles,function(e,t){t.kill()})}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"drawLines",value:function(e){this.bitmap.context.clearRect(0,0,this.world.width,this.world.height);var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.bitmap.context.strokeStyle="red",this.bitmap.context.beginPath(),this.bitmap.context.moveTo(a.start.x,a.start.y),this.bitmap.context.lineTo(a.end.x,a.end.y),this.bitmap.context.stroke()}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.bitmap.dirty=!0}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.State);n.default=x},{"../../prefabs/enemyBasic":2,"../../prefabs/enemyNav":3,"../../prefabs/obstacle":5,"../../prefabs/player":6,"../../prefabs/sword":7,"./enemies":14,"./enemyNavs":15,"./obstacles":17}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=[{x:0,y:980,width:1920,height:100},{x:650,y:650,width:300,height:100},{x:1200,y:400,width:300,height:100},{x:1400,y:500,width:100,height:480}];n.default=r},{}],18:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return o(t,e),a(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"loadResources",value:function(){this.game.load.image("crosshairs","assets/crosshair_red_small.png"),this.game.load.image("bullet","assets/bullet.png"),this.game.load.image("target","assets/target.png")}},{key:"onLoadComplete",value:function(){this.game.state.start("coldcountry")}}]),t}(Phaser.State);n.default=s},{}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"castRay",value:function(e,t,n){var r=new Phaser.Line(e.x,e.y,t.x,t.y),i=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.getEdges(),h=!0,f=!1,y=void 0;try{for(var d,p=c[Symbol.iterator]();!(h=(d=p.next()).done);h=!0){var b=d.value,v=Phaser.Line.intersects(r,b);if(v)return!0}}catch(e){f=!0,y=e}finally{try{!h&&p.return&&p.return()}finally{if(f)throw y}}}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return!1}}]),e}();n.default=o},{}]},{},[1]);
